<?php
	/** @var \MvcCore\Ext\Controllers\DataGrids\View $this */
	/** @var \MvcCore\Ext\Controllers\DataGrids\AgGrid $grid */
	$gridCssClasses = $grid->GetCssClasses();
	$gridId = $grid->GetId();
	$nonceAttr = $this->nonce !== NULL 
		? ' nonce="' . $this->nonce . '"' 
		: '' ;
?><div id="<?php echo $gridId; ?>"<?php
	if (count($gridCssClasses) > 0) 
		echo ' class="'.implode(' ', $gridCssClasses) . '"';
?>></div>
<script<?php echo $nonceAttr; ?>>new <?php echo $grid::GetJsClassFullName(); ?>(<?php
	echo \MvcCore\Tool::JsonEncode([
		'elementSelector'	=> '#' . $gridId,
		'renderConfig'		=> $grid->GetConfigRendering(),
		'columns'			=> $grid->GetConfigColumns(FALSE),
		'urlSegments'		=> $grid->GetConfigUrlSegments(),
		'ajaxParamsNames'	=> $grid->GetAjaxParamsNames(),
		'id'				=> $gridId,
		'clientPageMode'	=> $grid->GetClientPageMode(),
		'dataUrl'			=> $grid->GetDataUrl(),
		'dataRequestMethod'	=> $grid->GetDataRequestMethod(),
		'rowSelection'		=> $grid->GetRowSelection(),
		'itemsPerPage'		=> $grid->GetItemsPerPage(),
		'page'				=> $grid->GetPage(),
		'clientRowBuffer'	=> $grid->GetClientRowBuffer(),
		'controlsTexts'		=> $grid->GetControlsTexts(),
	]);
?>,<?php
	echo \MvcCore\Tool::JsonEncode([
		'totalCount'		=> $grid->GetTotalCount(),
		'offset'			=> $grid->GetOffset(),
		'limit'				=> $grid->GetLimit(),
		'sorting'			=> $grid->GetAjaxSorting(),
		'filtering'			=> $grid->GetAjaxFiltering(),
		'dataCount'			=> count($grid->GetPageData()),
		'data'				=> $grid->GetPageData()
	]);
?>);</script>